# open-process-mining

ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚¤ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  - ãƒ‡ãƒ¼ã‚¿æº–å‚™ã‹ã‚‰åˆ†æã€å¯è¦–åŒ–ã¾ã§ã®ä¸€è²«ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æä¾›

> ğŸ’¡ **è‡ªçµ„ç¹”ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚¤ãƒ‹ãƒ³ã‚°ã‚’å§‹ã‚ãŸã„æ–¹ã¸**: [åˆ©ç”¨ã‚¬ã‚¤ãƒ‰ (USAGE.md)](USAGE.md) ã§ã€ãƒ‡ãƒ¼ã‚¿æº–å‚™ã‹ã‚‰åˆ†æå®Ÿæ–½ã¾ã§ã®è©³ç´°ãªæ‰‹é †ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

## æ¦‚è¦

**open-process-mining** ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒŠãƒªã‚¹ãƒˆã®é–¢å¿ƒäº‹ã‚’åˆ†é›¢ã—ã€ãã‚Œãã‚Œã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚¤ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### ä¸»ãªç‰¹å¾´

- **ãƒ‡ãƒ¼ã‚¿åŠ å·¥**: dbt Coreã«ã‚ˆã‚‹å†ç¾å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- **åˆ†æã‚¨ãƒ³ã‚¸ãƒ³**: DFG (Directly-Follows Graph) ãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚»ã‚¹ç™ºè¦‹
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå¯è¦–åŒ–**: React Flowã¨Chakra UIã«ã‚ˆã‚‹ãƒªãƒƒãƒãªWeb UI
  - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ãƒãƒ¼ãƒ‰ã‚’è‡ªç”±ã«é…ç½®
  - é »åº¦ã®é«˜ã„ãƒ‘ã‚¹ã¯å¤ªã„é’ç·šã§è¡¨ç¤ºï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼‰
  - å‡¦ç†æ™‚é–“ãŒé•·ã„ãƒ‘ã‚¹ã¯èµ¤ç·šã§è­¦å‘Šè¡¨ç¤º
  - ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã§é‡è¦ãªãƒ•ãƒ­ãƒ¼ã«é›†ä¸­
  - ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ‡ã‚Šæ›¿ãˆæ™‚ã‚‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç¶­æŒ
- **æ—¥æœ¬èªå¯¾å¿œ**: ãƒ—ãƒ­ã‚»ã‚¹åã€åˆ†æåã®å®Œå…¨æ—¥æœ¬èªåŒ–
- **MIT License**: å•†ç”¨åˆ©ç”¨ã‚‚å«ã‚ãŸè‡ªç”±ãªåˆ©ç”¨ãŒå¯èƒ½

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Engineer  â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”œâ”€â”€> dbt (Data Transformation)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â†“
â”‚ Process Analyst â”‚â”€â”€â”˜    PostgreSQL
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â†“
                       Backend (FastAPI)
                         â†“
                    Frontend (React)
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ‡ãƒ¼ã‚¿åŠ å·¥**: dbt Core, PostgreSQL
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Python 3.9+, FastAPI, Pandas, NetworkX
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React, TypeScript, Vite, Chakra UI, React Flow
- **ã‚¤ãƒ³ãƒ•ãƒ©**: Docker Compose

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Docker & Docker Compose
- Git

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**

```bash
git clone https://github.com/suwa-sh/open-process-mining.git
cd open-process-mining
```

2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**

```bash
cp .env.example .env
# å¿…è¦ã«å¿œã˜ã¦ .env ã‚’ç·¨é›†
```

3. **ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•**

```bash
docker compose up -d
```

4. **dbtã§ãƒ‡ãƒ¼ã‚¿æº–å‚™**

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹
docker compose exec backend bash

# dbtãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /app/dbt

# dbtä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
dbt deps

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ (46ãƒ¬ã‚³ãƒ¼ãƒ‰ã€æ—¥æœ¬èªãƒ—ãƒ­ã‚»ã‚¹å)
dbt seed

# ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”Ÿæˆ
dbt run

# ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
dbt test
```

5. **åˆ†æã®å®Ÿè¡Œ**

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œï¼ˆæ—¥æœ¬èªã®åˆ†æåã‚’æŒ‡å®šï¼‰
PYTHONPATH=/app python /app/src/analysis/run_analysis.py --name "å—æ³¨ã‹ã‚‰é…é€_2025-10"
```

6. **Web UIã«ã‚¢ã‚¯ã‚»ã‚¹**

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã‚’é–‹ã

### ä¸»è¦ãªç”»é¢

- **ãƒ—ãƒ­ã‚»ã‚¹åˆ†æä¸€è¦§** (`/`): ä½œæˆã—ãŸãƒ—ãƒ­ã‚»ã‚¹åˆ†æã®ä¸€è¦§ã‚’è¡¨ç¤º
- **ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—** (`/analysis/{id}`): DFGãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼å¯è¦–åŒ–
- **çµ„ç¹”åˆ†æä¸€è¦§** (`/organization`): çµ„ç¹”åˆ†æçµæœã®ä¸€è¦§ã‚’è¡¨ç¤º
- **çµ„ç¹”åˆ†æè©³ç´°** (`/organization/{id}`): ãƒãƒ³ãƒ‰ã‚ªãƒ¼ãƒãƒ¼ãƒ»ä½œæ¥­è² è·ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- **æˆæœåˆ†æä¸€è¦§** (`/outcome`): æˆæœåˆ†æçµæœã®ä¸€è¦§ã‚’è¡¨ç¤º
- **æˆæœåˆ†æè©³ç´°** (`/outcome/{id}`): ãƒ‘ã‚¹åˆ¥æˆæœåˆ†æãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¯”è¼ƒ

## ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

### ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—è¡¨ç¤º

![ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—](docs/images/process-map.png)

- æ—¥æœ¬èªã®ãƒ—ãƒ­ã‚»ã‚¹åã§è¡¨ç¤º
- é’ã„å¤ªç·šãŒãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼ˆå—æ³¨ç™»éŒ²â†’å…¥é‡‘ç¢ºèªâ†’å‡ºè·å®Œäº†â†’é…é€å®Œäº†ï¼‰
- èµ¤ã„ç·šãŒå•é¡Œã®ã‚ã‚‹ãƒ‘ã‚¹ï¼ˆé…é€å¤±æ•—â†’å†é…é€æ‰‹é…ï¼‰

## ä¸»è¦æ©Ÿèƒ½

### ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—ã®å¯è¦–åŒ–

- **ãƒãƒ¼ãƒ‰ã®ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: ãƒãƒ¼ãƒ‰ã‚’è‡ªç”±ã«é…ç½®ã—ã¦è¦‹ã‚„ã™ã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œæˆ
- **ãƒ‘ã‚¹ã®å¼·èª¿è¡¨ç¤º**:
  - ğŸ”µ **é’è‰²ã®å¤ªã„ç·š**: é »åº¦ãŒé«˜ã„ãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼ˆæœ€å¤§é »åº¦ã®80%ä»¥ä¸Šï¼‰
  - ğŸ”´ **èµ¤è‰²ã®ç·š**: å‡¦ç†æ™‚é–“ãŒé•·ã„å•é¡Œã®ã‚ã‚‹ãƒ‘ã‚¹ï¼ˆæœ€å¤§å¾…æ©Ÿæ™‚é–“ã®70%ä»¥ä¸Šï¼‰
- **ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§ä½é »åº¦ã®ãƒ‘ã‚¹ã‚’éè¡¨ç¤ºã«ã—ã¦é‡è¦ãªãƒ•ãƒ­ãƒ¼ã«é›†ä¸­
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ‡ã‚Šæ›¿ãˆ**: é »åº¦ã¨å¹³å‡å¾…æ©Ÿæ™‚é–“ã‚’åˆ‡ã‚Šæ›¿ãˆã¦åˆ†æ
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä¿æŒ**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ‡ã‚Šæ›¿ãˆæ™‚ã‚‚ãƒ‰ãƒ©ãƒƒã‚°ã—ãŸé…ç½®ã‚’ç¶­æŒ
- **è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹å¯¾å¿œ**: ç•°ãªã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’åŒä¸€ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ãƒ»åˆ†æ

### çµ„ç¹”åˆ†æï¼ˆãƒãƒ³ãƒ‰ã‚ªãƒ¼ãƒãƒ¼ãƒ»ä½œæ¥­è² è·ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰

- **ğŸ”„ ãƒãƒ³ãƒ‰ã‚ªãƒ¼ãƒãƒ¼åˆ†æ**: èª°ã¨èª°ãŒé€£æºã—ã¦ä½œæ¥­ã—ã¦ã„ã‚‹ã‹ã‚’å¯è¦–åŒ–
  - ç¤¾å“¡åˆ¥ãƒ»éƒ¨ç½²åˆ¥ã®é›†è¨ˆãƒ¬ãƒ™ãƒ«ã‚’é¸æŠå¯èƒ½
  - ãƒãƒ³ãƒ‰ã‚ªãƒ¼ãƒãƒ¼é–“ã®å¹³å‡å¾…æ©Ÿæ™‚é–“ã‚’è¨ˆç®—
  - é »åº¦ã¨å¾…æ©Ÿæ™‚é–“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ‡ã‚Šæ›¿ãˆ
  - ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§é‡è¦ãªé€£æºã«é›†ä¸­
- **ğŸ“Š ä½œæ¥­è² è·åˆ†æ**: èª°ã®ä½œæ¥­é‡ãŒå¤šã„ã‹ã‚’å¯è¦–åŒ–
  - ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ•°ã¨ã‚±ãƒ¼ã‚¹æ•°ã®é›†è¨ˆ
  - ä½œæ¥­ãŒé›†ä¸­ã—ã¦ã„ã‚‹æ‹…å½“è€…ã‚’ç‰¹å®š
- **â±ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**: èª°ã®å‡¦ç†æ™‚é–“ãŒé•·ã„ã‹ã‚’å¯è¦–åŒ–
  - å¹³å‡å‡¦ç†æ™‚é–“ãƒ»ä¸­å¤®å€¤ãƒ»åˆè¨ˆæ™‚é–“ã‚’åˆ†æ
  - ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã£ã¦ã„ã‚‹æ‹…å½“è€…ã‚’ç‰¹å®š

### æˆæœåˆ†æï¼ˆãƒ‘ã‚¹åˆ¥æˆæœãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¯”è¼ƒï¼‰

- **ğŸ“ˆ ãƒ‘ã‚¹åˆ¥æˆæœåˆ†æ**: ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¹ã”ã¨ã®æˆæœæŒ‡æ¨™ã‚’å¯è¦–åŒ–
  - å„ãƒ‘ã‚¹ã®å¹³å‡å€¤ãƒ»ä¸­å¤®å€¤ãƒ»åˆè¨ˆå€¤ã‚’è¡¨ç¤º
  - æˆæœã®é«˜ã„ãƒ‘ã‚¹ã‚’è‡ªå‹•æ¤œå‡ºï¼ˆå¹³å‡å€¤ã®75%ä»¥ä¸Šã‚’å¼·èª¿è¡¨ç¤ºï¼‰
  - ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—ä¸Šã§æˆæœãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ç¢ºèª
- **ğŸ” ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¯”è¼ƒ**: é«˜æˆæœãƒ‘ã‚¹ã¨ä½æˆæœãƒ‘ã‚¹ã‚’æ¯”è¼ƒ
  - ä¸Šä½25% vs ä¸‹ä½25%ã®æˆæœæ¯”è¼ƒ
  - ã‚«ã‚¹ã‚¿ãƒ é–¾å€¤ã«ã‚ˆã‚‹æŸ”è»Ÿãªã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²
  - çµ±è¨ˆã‚µãƒãƒªãƒ¼ï¼ˆå¹³å‡å€¤ã€ä¸­å¤®å€¤ã€æœ€å°å€¤ã€æœ€å¤§å€¤ã€åˆè¨ˆå€¤ï¼‰
  - ãƒ‘ã‚¹æ§‹é€ ã®é•ã„ã‚’å¯è¦–åŒ–

### ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

#### å—æ³¨ã‹ã‚‰é…é€ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆ10ä»¶ã®æ³¨æ–‡ã€46ã‚¤ãƒ™ãƒ³ãƒˆï¼‰

- **å—æ³¨ç™»éŒ²** â†’ å…¥é‡‘ç¢ºèª â†’ å‡ºè·å®Œäº† â†’ **é…é€å®Œäº†**ï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼‰
- å…¥é‡‘ã‚¨ãƒ©ãƒ¼ â†’ å…¥é‡‘ç¢ºèªï¼ˆãƒªãƒˆãƒ©ã‚¤ï¼‰
- å…¥é‡‘ç¢ºèª â†’ å“è³ªæ¤œæŸ» â†’ å‡ºè·å®Œäº†
- å‡ºè·å®Œäº† â†’ **é…é€å¤±æ•—** â†’ **å†é…é€æ‰‹é…** â†’ é…é€å®Œäº†ï¼ˆå•é¡Œãƒ‘ã‚¹ï¼‰
- å…¥é‡‘ã‚¨ãƒ©ãƒ¼ â†’ å—æ³¨ã‚­ãƒ£ãƒ³ã‚»ãƒ«

#### å¾“æ¥­å“¡æ¡ç”¨ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆ5ä»¶ã®å¿œå‹Ÿã€27ã‚¤ãƒ™ãƒ³ãƒˆï¼‰

- **å¿œå‹Ÿå—ä»˜** â†’ æ›¸é¡å¯©æŸ» â†’ ä¸€æ¬¡é¢æ¥ â†’ äºŒæ¬¡é¢æ¥ â†’ å†…å®šé€šçŸ¥ â†’ å…¥ç¤¾æ‰‹ç¶šã â†’ **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å®Œäº†**ï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼‰
- æ›¸é¡å¯©æŸ» â†’ **æ›¸é¡ä¸åˆæ ¼**
- ä¸€æ¬¡é¢æ¥ â†’ **ä¸€æ¬¡é¢æ¥ä¸åˆæ ¼**
- å†…å®šé€šçŸ¥ â†’ **å†…å®šè¾é€€**

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘

#### æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è¿½åŠ 

1. `dbt/seeds/` ã«CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
2. `dbt/models/staging/` ã§ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°
3. `dbt/models/marts/fct_event_log.sql` ã‚’æ›´æ–°

```bash
dbt seed
dbt run
dbt test
```

#### åˆ†æã®å®Ÿè¡Œ

```bash
# å—æ³¨ã‹ã‚‰é…é€ãƒ—ãƒ­ã‚»ã‚¹ã®åˆ†æ
PYTHONPATH=/app python src/analysis/run_analysis.py --name "å—æ³¨ã‹ã‚‰é…é€_2025-10" --process-type "order-delivery"

# å¾“æ¥­å“¡æ¡ç”¨ãƒ—ãƒ­ã‚»ã‚¹ã®åˆ†æ
PYTHONPATH=/app python src/analysis/run_analysis.py --name "å¾“æ¥­å“¡æ¡ç”¨_2025-10" --process-type "employee-onboarding"
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºè€…å‘ã‘

#### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠå†…
cd /app
pytest tests/
```

#### APIã®å‹•ä½œç¢ºèª

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/health

# åˆ†æçµæœä¸€è¦§ã‚’å–å¾—
curl http://localhost:8000/analyses

# ç‰¹å®šã®åˆ†æçµæœã‚’å–å¾—
curl http://localhost:8000/analyses/{analysis_id}

# 2ã¤ã®åˆ†æã‚’æ¯”è¼ƒ
curl "http://localhost:8000/compare?before={id1}&after={id2}"
```

#### APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**åŸºæœ¬API**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/health` | GET | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
| `/process-types` | GET | åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ã‚»ã‚¹ã‚¿ã‚¤ãƒ—ä¸€è¦§ |

**ãƒ—ãƒ­ã‚»ã‚¹åˆ†æAPI**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/analyses` | GET | åˆ†æçµæœã®ä¸€è¦§å–å¾— (`?process_type=xxx`ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½) |
| `/analyses/{analysis_id}` | GET | ç‰¹å®šã®åˆ†æçµæœã‚’å–å¾— |
| `/compare` | GET | 2ã¤ã®åˆ†æçµæœã‚’æ¯”è¼ƒ |

**çµ„ç¹”åˆ†æAPIï¼ˆä¿å­˜å‹ï¼‰**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/organization/analyze` | POST | çµ„ç¹”åˆ†æã‚’å®Ÿè¡Œã—ã€çµæœã‚’DBã«ä¿å­˜ |
| `/organization/analyses` | GET | çµ„ç¹”åˆ†æçµæœã®ä¸€è¦§å–å¾— (`?process_type=xxx`ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½) |
| `/organization/analyses/{analysis_id}` | GET | ç‰¹å®šã®çµ„ç¹”åˆ†æçµæœã‚’å–å¾— |

**çµ„ç¹”åˆ†æAPIï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/organization/handover` | GET | ãƒãƒ³ãƒ‰ã‚ªãƒ¼ãƒãƒ¼åˆ†æ (`?process_type=xxx&aggregation_level=employee/department`) |
| `/organization/workload` | GET | ä½œæ¥­è² è·åˆ†æ (`?process_type=xxx&aggregation_level=employee/department`) |
| `/organization/performance` | GET | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ (`?process_type=xxx&aggregation_level=employee/department`) |

**æˆæœåˆ†æAPI**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/outcome/metrics` | GET | åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ä¸€è¦§ã‚’å–å¾— (`?process_type=xxx`ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½) |
| `/outcome/analyses` | GET | æˆæœåˆ†æçµæœã®ä¸€è¦§å–å¾— (`?process_type=xxx&metric_name=xxx`ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½) |
| `/outcome/analyses/{analysis_id}` | GET | ç‰¹å®šã®æˆæœåˆ†æçµæœã‚’å–å¾— |
| `/outcome/analyze` | POST | æˆæœåˆ†æã‚’å®Ÿè¡Œã—ã€çµæœã‚’DBã«ä¿å­˜ |

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºè€…å‘ã‘

#### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯è‡ªå‹•ã§ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠå†…
cd /app
npm run dev
```

#### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
npm run test
```

### E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰

E2Eãƒ†ã‚¹ãƒˆã¯ã€å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®å‹•ä½œã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

#### å‰ææ¡ä»¶

1. Docker Composeã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨
2. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãŒæŠ•å…¥ã•ã‚Œã¦ã„ã‚‹ã“ã¨

```bash
# ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
docker compose up -d

# å…¨ã‚µãƒ¼ãƒ“ã‚¹ãŒhealthyã«ãªã‚‹ã¾ã§å¾…æ©Ÿ
docker compose ps

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
docker compose exec backend bash
cd /app/dbt
dbt deps
dbt seed
dbt run
exit
```

#### E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# E2Eãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd e2e

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
npm install

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
npx playwright install chromium

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
npm test

# UIãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆå¯¾è©±çš„ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œãƒ»ãƒ‡ãƒãƒƒã‚°ï¼‰
npm run test:ui

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œ
npm run test:headed

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œï¼‰
npm run test:debug

# ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º
npm run report
```

#### ãƒ†ã‚¹ãƒˆå†…å®¹

- **ãƒ—ãƒ­ã‚»ã‚¹åˆ†æ**: ä¸€è¦§è¡¨ç¤ºã€æ–°è¦ä½œæˆã€ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ—è¡¨ç¤ºã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **çµ„ç¹”åˆ†æ**: ä¸€è¦§è¡¨ç¤ºã€æ–°è¦ä½œæˆã€é›†è¨ˆãƒ¬ãƒ™ãƒ«åˆ‡ã‚Šæ›¿ãˆã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **æˆæœåˆ†æ**: ä¸€è¦§è¡¨ç¤ºã€ãƒ‘ã‚¹åˆ¥æˆæœä½œæˆã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¯”è¼ƒä½œæˆã€è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

**æ³¨æ„**: E2Eãƒ†ã‚¹ãƒˆã¯åˆ†æå‡¦ç†ã‚’å®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã€å®Œäº†ã¾ã§ã«æ•°åˆ†ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿã™ã‚‹å ´åˆã¯ã€`playwright.config.ts`ã®`timeout`è¨­å®šã‚’èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

è©³ç´°ã¯ [e2e/README.md](e2e/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š

### PostgreSQLãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å ´æ‰€

- **Dockerãƒœãƒªãƒ¥ãƒ¼ãƒ **: `postgres_data`ï¼ˆæ°¸ç¶šåŒ–ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å**: `process_mining_db`
- **ãƒãƒ¼ãƒˆ**: `localhost:5432`
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼å**: `process_mining`ï¼ˆ`.env`ã§è¨­å®šï¼‰
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: `secure_password`ï¼ˆ`.env`ã§è¨­å®šï¼‰

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆï¼ˆã™ã¹ã¦`public`ã‚¹ã‚­ãƒ¼ãƒï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ«/ãƒ“ãƒ¥ãƒ¼ | ã‚¿ã‚¤ãƒ— | èª¬æ˜ |
|---------|---------|------|
| `raw_order_events` | ãƒ†ãƒ¼ãƒ–ãƒ« | dbt seedã®ç”Ÿãƒ‡ãƒ¼ã‚¿ |
| `stg_raw_order_events` | ãƒ“ãƒ¥ãƒ¼ | dbtã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ« |
| `fct_event_log` | ãƒ†ãƒ¼ãƒ–ãƒ« | ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚¤ãƒ‹ãƒ³ã‚°ç”¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ï¼ˆçµ„ç¹”æƒ…å ±å«ã‚€ï¼‰ |
| `fct_case_outcomes` | ãƒ†ãƒ¼ãƒ–ãƒ« | ã‚±ãƒ¼ã‚¹åˆ¥æˆæœãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¡ãƒˆãƒªãƒƒã‚¯å€¤ï¼‰ |
| `analysis_results` | ãƒ†ãƒ¼ãƒ–ãƒ« | ãƒ—ãƒ­ã‚»ã‚¹åˆ†æçµæœï¼ˆJSONå½¢å¼ï¼‰ |
| `organization_analysis_results` | ãƒ†ãƒ¼ãƒ–ãƒ« | çµ„ç¹”åˆ†æçµæœï¼ˆJSONå½¢å¼ï¼‰ |
| `outcome_analysis_results` | ãƒ†ãƒ¼ãƒ–ãƒ« | æˆæœåˆ†æçµæœï¼ˆJSONå½¢å¼ï¼‰ |
| `master_employees` | ãƒ†ãƒ¼ãƒ–ãƒ« | ç¤¾å“¡ãƒã‚¹ã‚¿ãƒ¼ |
| `master_departments` | ãƒ†ãƒ¼ãƒ–ãƒ« | éƒ¨ç½²ãƒã‚¹ã‚¿ãƒ¼ |

`fct_event_log` ã‚¹ã‚­ãƒ¼ãƒ:
- `case_id`: ã‚±ãƒ¼ã‚¹ID
- `activity`: ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å
- `timestamp`: ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿæ—¥æ™‚
- `resource`: ãƒªã‚½ãƒ¼ã‚¹ï¼ˆå¾“æ¥ã®æ‹…å½“è€…ï¼‰
- `employee_id`: ç¤¾å“¡IDï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `employee_name`: ç¤¾å“¡åï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `role`: å½¹å‰²ï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `department_id`: éƒ¨ç½²IDï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `department_name`: éƒ¨ç½²åï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `department_type`: éƒ¨ç½²ã‚¿ã‚¤ãƒ—ï¼ˆçµ„ç¹”åˆ†æç”¨ï¼‰
- `process_type`: ãƒ—ãƒ­ã‚»ã‚¹ã‚¿ã‚¤ãƒ—

### æ¥ç¶šæ–¹æ³•

#### æ–¹æ³•1: Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§psqlã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

```bash
# PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹
docker compose exec postgres psql -U process_mining -d process_mining_db

# ã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ã‚’ç¢ºèª
\dn

# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ã‚’ç¢ºèª
\dt public.*

# ãƒ“ãƒ¥ãƒ¼ä¸€è¦§ã‚’ç¢ºèª
\dv public.*

# ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã‚’ç¢ºèª
SELECT * FROM public.fct_event_log LIMIT 10;

# åˆ†æçµæœã‚’ç¢ºèª
SELECT analysis_id, analysis_name, created_at FROM public.analysis_results;

# çµ‚äº†
\q
```

#### æ–¹æ³•2: ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã‹ã‚‰psqlã§æ¥ç¶š

```bash
# psqlãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆ
psql -h localhost -p 5432 -U process_mining -d process_mining_db
# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: secure_password
```

#### æ–¹æ³•3: GUIãƒ„ãƒ¼ãƒ«ã§æ¥ç¶šï¼ˆTablePlusã€DBeaverã€pgAdminãªã©ï¼‰

æ¥ç¶šæƒ…å ±:
- **Host**: `localhost`
- **Port**: `5432`
- **Database**: `process_mining_db`
- **User**: `process_mining`
- **Password**: `secure_password`

### ã‚ˆãä½¿ã†SQL

```sql
-- ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°å…¨ä»¶å–å¾—
SELECT * FROM public.fct_event_log
ORDER BY case_id, timestamp;

-- ã‚±ãƒ¼ã‚¹åˆ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆæ•°
SELECT case_id, COUNT(*) as event_count
FROM public.fct_event_log
GROUP BY case_id;

-- ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£åˆ¥ã®é »åº¦
SELECT activity, COUNT(*) as frequency
FROM public.fct_event_log
GROUP BY activity
ORDER BY frequency DESC;

-- ãƒ—ãƒ­ã‚»ã‚¹åˆ†æçµæœä¸€è¦§
SELECT
  analysis_id,
  analysis_name,
  created_at,
  jsonb_array_length(result_data->'nodes') as node_count,
  jsonb_array_length(result_data->'edges') as edge_count
FROM public.analysis_results
ORDER BY created_at DESC;

-- çµ„ç¹”åˆ†æçµæœä¸€è¦§
SELECT
  analysis_id,
  analysis_name,
  process_type,
  aggregation_level,
  created_at
FROM public.organization_analysis_results
ORDER BY created_at DESC;

-- æˆæœåˆ†æçµæœä¸€è¦§
SELECT
  analysis_id,
  analysis_name,
  process_type,
  metric_name,
  analysis_type,
  created_at
FROM public.outcome_analysis_results
ORDER BY created_at DESC;

-- ã‚±ãƒ¼ã‚¹åˆ¥æˆæœãƒ‡ãƒ¼ã‚¿
SELECT
  process_type,
  case_id,
  metric_name,
  metric_value,
  metric_unit
FROM public.fct_case_outcomes
WHERE process_type = 'employee-onboarding'
ORDER BY case_id, metric_name;
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
open-process-mining/
â”œâ”€â”€ dbt/                # dbtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”œâ”€â”€ seeds/          # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ models/         # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ tests/          # ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ backend/            # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Python/FastAPI)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ analysis/   # åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ api/        # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ models/     # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ tests/          # ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ frontend/           # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (React/TypeScript)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/      # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ store/      # çŠ¶æ…‹ç®¡ç†
â”‚   â””â”€â”€ tests/          # ãƒ†ã‚¹ãƒˆ
â””â”€â”€ docker-compose.yml  # Dockerè¨­å®š
```

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### åˆ©ç”¨è€…å‘ã‘
- **[USAGE.md](USAGE.md)**: è‡ªçµ„ç¹”ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚¤ãƒ‹ãƒ³ã‚°ã‚’å®Ÿæ–½ã™ã‚‹æ–¹æ³•ï¼ˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã‹ã‚‰åˆ†æå®Ÿæ–½ã¾ã§ï¼‰

### é–‹ç™ºè€…å‘ã‘
- [CLAUDE.md](CLAUDE.md): Claude Codeå‘ã‘ã®é–‹ç™ºã‚¬ã‚¤ãƒ‰
- [tmp/PRD.md](tmp/PRD.md): ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ£ãƒ³ãƒã‚¹
- [tmp/ä»•æ§˜.md](tmp/ä»•æ§˜.md): è©³ç´°å®Ÿè£…ä»•æ§˜
- [tmp/plan.md](tmp/plan.md): å®Ÿè£…è¨ˆç”»æ›¸

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯ [LICENSE](LICENSE) ã‚’å‚ç…§

## ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

Issueã€Pull Requestã‚’æ­“è¿ã—ã¾ã™ã€‚

## å‚è€ƒè³‡æ–™

- [dbt documentation](https://docs.getdbt.com/)
- [FastAPI documentation](https://fastapi.tiangolo.com/)
- [React Flow documentation](https://reactflow.dev/)
- [Chakra UI documentation](https://chakra-ui.com/)
